<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab"  value="character">

<div class="tab-buttons middle center">
  <button type="action" name="act_character">Character</button>
  <button type="action" name="act_gen">General Rules</button>
  <button type="action" name="act_npc">NPC</button>
  <button type="action" name="act_npcgen">NPC General Rules</button>
</div>


<main class="sheet-character">

  <section class="header f-center">
    <h1>BEACON RPG</h1>
  </section>

<section class="skill">
    <span>Name <input name="attr_character_name" type="text"></span><br>
    <span>Job <input name="attr_job" type="text" list="jobs" class=jobBox> Ancestry <input name="attr_ancestry" type="text" list="ancestries" class=ancestryBox></span><br>
    <div class="f-row nowrap">
      <div>Bulk</div>
      <input type="number" name="attr_blk" value="">
      <button type="roll" name="roll_blk" value="&{template:rolls} {{title=Bulk}} {{subtitle=@{character_name} }} {{roll= [[1d20+@{blk} +?{Accuracy/Difficulty|0}d6k1]]}}"> </button>
    </div>
    <div class="f-row nowrap">
      <div>Agility</div>
      <input type="number" name="attr_agi" value="">
      <button type="roll" name="roll_agi" value="&{template:rolls} {{title=Agility}} {{subtitle=@{character_name} }} {{roll= [[d20+@{agi}[agi] +?{Accuracy/Difficulty|0}d6k1 ]]}}"> </button>
    </div>
    <div class="f-row nowrap">
      <div>Mind</div>
      <input type="number" name="attr_mnd" value="">
      <button type="roll" name="roll_mnd" value="&{template:rolls} {{title=Mind}} {{subtitle=@{character_name} }} {{roll= [[d20+@{mnd}[mnd] +?{Accuracy/Difficulty|0}d6k1 ]]}}"> </button>
    </div>
    <div class="f-row nowrap">
      <div>Magic</div>
      <input type="number" name="attr_mgk" value="">
      <button type="roll" name="roll_mgk" value="&{template:rolls} {{title=Magic}} {{subtitle=@{character_name} }} {{roll= [[d20+@{mgk}[mgk] +?{Accuracy/Difficulty|0}d6k1 ]]}}"> </button>
    </div>
  </section>

  <section class="stats common">
      <div>Level</div><input name="attr_level" type="number">
      <div>Grit</div><input name="attr_grit" type="number"><br/>
      <div>Size</div><input name="attr_size" type="number">
      <div>Dodge</div><input name="attr_dodge" type="number"><br/>
      <div>A-Def</div><input name="attr_a-def" type="number">
      <div>Save Target</div><input name="attr_save" type="number"><br/>
      <div>Scope</div><input name="attr_scope" type="number">
      <div>Speed</div><input name="attr_speed" type="number">
  </section>
  
  <section class="ult">
    <input type="checkbox" class="sheet-toggle-show" >
    <button type="roll" name="roll_ult" value="&{template:rolls} {{title=<b>@{ultname}</b>}} {{subtitle=@{character_name}}} {{Effect=@{ulteffect}}}" ></button>
    <Label> <b>Limit Break</b> <input type=text name="attr_ultname"></label>
    <div class="sheet-body">
    <textarea name="attr_ulteffect"></textarea>
    </div>
  </section>

  <section class="bars">
    <table class="b">
        <tr class="b">
            <td class="b"><div>Armor</div> <input type="number" name="attr_armor" value=""></td>
            <td class="b"><div>Focus</div> <input type="number" name="attr_focus" value=""></td>
        </tr>
        <tr class="b">
            <td class="b"><div>Temp HP</div> <input type="number" name="attr_temphp" value=""></td>
        </tr>
        <tr class="b">
            <td class="b"><div>HP</div> <input type="number" name="attr_3 hp" value=" "> <span>/</span> <input type="number" name="attr_3 hp_max" value=" "></td>
            <td class="b"><div>Wounds</div><input type="number" name="attr_wound" value=""><span>/</span><input type="number" name="attr_wound_max" value=""></span></td>
        </tr>
        <tr class="b">
            <td class="b"><div>Stress</div> <input type="number" name="attr_1 stress cap" value=" "> / <input type="number" name="attr_1 stress cap_max" value=" "></td>
            <td class="b"><div>Overstress</div><input type="number" name="attr_overstress" value=""><span>/</span><input type="number" name="attr_overstress_max" value=""></span></td>
        </tr>
        <tr class="b">
            <td class="b"><div>Mana</div> <input type="number" name="attr_2 mana" value=" "> / <input type="number" name="attr_2 mana_max" value=" "></td>
        </tr>
        <tr class="b">
            <td class="b"><div>Recoveries</div> <input type="number" name="attr_rec" value=" "> / <input type="number" name="attr_rec_max" value=" "></td>
        </tr>
      </table>
  </section>

  <section class="attack">
    <h3>Attacks</h3>
    <fieldset class="repeating_attacks">
       <input type="checkbox" class="sheet-toggle-show" >
       <button type="roll" name="roll_attack" value="&{template:rolls} {{title=@{attackname}}} {{subtitle=@{character_name}}} {{Type=@{attacktype}}} {{Range=@{attackrange}}} {{Tags=@{attacktags}}}  {{To Hit= [[1d20+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[@{attackdamage}]] @{damagetype}}} {{Effect=@{attackeffects}}}" > </button>
        <input type="text" class=text160 name="attr_attackname" value=""><span>Range<input type="text" class=text105 name="attr_attackrange" value=""></span><br>
        <div class="sheet-body">
        <span>Type<input type="text" class=text105 name="attr_attacktype" value=""></span><span>Damage<input type="text" class=smallerTextbox name="attr_attackdamage" value=""></span><span>Type<input type="text" name="attr_damagetype" class=text60 value=""></span><br>    
        <span>Tags<input type="text" name="attr_attacktags" value=""></span>Effects? <input type="checkbox" class="sheet-toggle-show"><br>
        <div class="sheet-body">
        <textarea class=textAtks name="attr_attackeffects" value=""></textarea></div>
        </div>
    </fieldset>
  </section>

<section class="power">
    <h3>Spells & Techniques</h3>
    <div>Channel: <input type="text" class=resizedTextbox value=""></div>
    <fieldset class="repeating_powers">
        <input type="checkbox" class="sheet-toggle-show" >
        <button type="roll" name="roll_power" value="&{template:rolls} {{title=@{powername}}} {{subtitle=@{character_name} }} {{Type=@{powertype}}} {{Action=@{poweraction}}} {{Range=@{powerrange}}} {{Tags=@{powertags}}} {{Effect=@{powereffects}}}" > </button>
        <input type="text" class=resizedTextbox name="attr_powername" value=""><br>
        <div class="sheet-body">
        <span>Type<input type="text" class=text40 name="attr_powertype" value=""></span><span>Action<input type="text" class=text80 Textbox name="attr_poweraction" value=""></span><span>Range<input type="text" class=text105 name="attr_powerrange" value=""></span><br>
        <span>Tags<input type="text" name="attr_powertags" value=""></span><br>
        <textarea name="attr_powereffects"></textarea>
        </div>
    </fieldset>
  </section>

<section class="inv">
    <h3>Support Items</h3>
    <fieldset class="repeating_support">
        <input type="checkbox" class="sheet-toggle-show" >
        <button type="roll" name="roll_support" value="&{template:rolls} {{title=@{supportname}}} {{subtitle=@{character_name}}} {{Type=@{supporttype}}} {{Tags=@{supporttags}}} {{Effects=@{supporteffects}}}"> </button>
        <input type="text" name="attr_supportname" value="">
        <div class="sheet-body">
        <span>Type<input type="text" name="attr_supporttype" value=""></span><br>
        <span>Tags<input type="text" name="attr_supporttags" value=""></span><br>
        <textarea name="attr_supporteffects"></textarea>
        </div>
  </section>

 <section class="talent">
    <h3>Talents</h3>
   <fieldset class="repeating_talent">
        <input type="checkbox" class="sheet-toggle-show" >
        <button type="roll" name="roll_talent" value="&{template:rolls} {{title=@{talentname}}} {{subtitle=@{character_name}}} {{=@{talenteffects}}}"> </button>
        <input type="text" class="resizedTextbox" name="attr_talentname" value="">
        <div class="sheet-body">
        <textarea name="attr_talenteffects"></textarea>
        </div>
</section>

  <section class="misc">
    <h3>Ancestry and Job Traits</h3>
    <input type="checkbox" class="sheet-toggle-show" >
    <button type="roll" name="roll_anc" value="&{template:rolls} {{title=@{anctraitname}}} {{subtitle=@{character_name}}} {{=@{anctrait}}}" ></button>
    <Label> Ancestry Trait <input type=text class=text160 name="attr_anctraitname"></label>
    <div class="sheet-body">
    <textarea name="attr_anctrait"></textarea>
    </div>
    <fieldset class="repeating_trait">
    <input type="checkbox" class="sheet-toggle-show" >
    <button type="roll" name="roll_trait" value="&{template:rolls} {{title=@{traitname}}} {{subtitle=@{character_name}}} {{=@{traiteffect}}}" ></button>
    <input name="attr_traitname", class=text160 type="text"> 
    <div class="sheet-body">
    <textarea name="attr_traiteffect"></textarea> </div>
    </fieldset>
    </section>

  <footer class="f-col f-center">
    <span>BEACON created by Tim Gonzalez & Pirate Gonzalez Games. This sheet is a modification of Anduh's Roll20-grid-template - thank you very much for the template. </span>
  </footer>

</main>

<!-- NPC Sheet -->


<main class="sheet-npc">

  <section class="header f-center">
    <h1>BEACON RPG</h1>
  </section>

<section class="npc-base">
    <div>Name <input name="attr_character_name" type="text" class=resizedTextbox></div>
    <div><span>Tier </span><input name="attr_tier" type="number"><span>Size</span><input name="attr_size" type="number"></div>
    <div>Initiative<input name="attr_initiative" type="number"></div>
    <div class="f-row nowrap">
      <div>Bulk</div>
      <input type="number" name="attr_blk" value=" ">
      <button type="roll" name="roll_blk" value="&{template:rolls} {{title=Bulk}} {{subtitle=@{character_name} }} {{roll= [[1d20+@{blk} +?{Accuracy/Difficulty|0}d6k1]]}}"> </button>
    </div>
    <div class="f-row nowrap">
      <div>Agility</div>
      <input type="number" name="attr_agi" value=" ">
      <button type="roll" name="roll_agi" value="&{template:rolls} {{title=Agility}} {{subtitle=@{character_name} }} {{roll= [[d20+@{agi}[agi] +?{Accuracy/Difficulty|0}d6k1 ]]}}"> </button>
    </div>
    <div class="f-row nowrap">
      <div>Mind</div>
      <input type="number" name="attr_mnd" value="3">
      <button type="roll" name="roll_mnd" value="&{template:rolls} {{title=Mind}} {{subtitle=@{character_name} }} {{roll= [[d20+@{mnd}[mnd] +?{Accuracy/Difficulty|0}d6k1 ]]}}"> </button>
    </div>
    <div class="f-row nowrap">
      <div>Magic</div>
      <input type="number" name="attr_mgk" value="3">
      <button type="roll" name="roll_mgk" value="&{template:rolls} {{title=Magic}} {{subtitle=@{character_name} }} {{roll= [[d20+@{mgk}[mgk] +?{Accuracy/Difficulty|0}d6k1 ]]}}"> </button>
    </div>
  </section>

  <section class="npc-stats common">
      <div>Dodge</div><input name="attr_dodge" type="number">
      <div>A-Def</div><input name="attr_a-def" type="number"><br/>
      <div>Save Target</div><input name="attr_save" type="number">
      <div>Scope</div><input name="attr_scope" type="number"><br/>
      <div>Speed</div><input name="attr_speed" type="number">
  </section>

  <section class="npc-bar">
      <div>Armor</div> <input type="number" name="attr_armor" value="">
      <div>Temp HP</div> <input type="number" name="attr_temphp" value=" "><br/>
      <div>HP</div> <input type="number" name="attr_3 hp" value=" "> <span>/</span> <input type="number" name="attr_3 hp_max" value=" "><br/>
      <div>Stress</div> <input type="number" name="attr_1 stress cap" value=" "> / <input type="number" name="attr_1 stress cap_max" value=" "><br/>
      <div>Mana</div> <input type="number" name="attr_2 mana" value=" "> / <input type="number" name="attr_2 mana_max" value=" "><br/>
  </section>


  <section class="npc-atk">
    <h3>Attacks</h3>
    <fieldset class="repeating_attacks">
        <input type="checkbox" class="sheet-toggle-show" >
        <button type="roll" name="roll_attack" value="&{template:rolls} {{title=@{attackname}}} {{subtitle=@{character_name}}} {{Type=@{attacktype}}} {{Range=@{attackrange}}} {{Tags=@{attacktags}}} {{To Hit= [[1d20+@{npctohit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[@{attackdamage}]] @{damagetype}}} {{Effect=@{attackeffects}}}" > </button>
        <input type="text" class=text160 name="attr_attackname" value=""><span>Range<input type="text" class=text105 name="attr_attackrange" value=""></span><br>
        <div class="sheet-body">
        <span>Type<input type="text" name="attr_attacktype" value=""></span><br>
        <span>To Hit<input type="text" name="attr_npctohit" class=smallerTextbox value=""></span><span>Damage<input type="text" class=smallerTextbox name="attr_attackdamage" value=""></span><span>Type<input type="text" name="attr_damagetype" class=resizedTextbox value=""></span><br>
        <span>Tags<input type="text" name="attr_attacktags" value=""></span>Effects? <input type="checkbox" class="sheet-toggle-show"><br>
        <div class="sheet-body">
        <textarea class=textAtks name="attr_attackeffects" value=""></textarea></div>
        </div>
        </div>
    </fieldset>
  </section>
  
  <section class="npc-actions">
    <h3>Skills & Spells</h3>
    <fieldset class="repeating_powers">
        <input type="checkbox" class="sheet-toggle-show" >
        <button type="roll" name="roll_power" value="&{template:rolls} {{title=@{powername}}} {{subtitle=@{character_name} }} {{Type=@{powertype}}} {{Action=@{poweraction}}} {{Range=@{powerrange}}} {{Tags=@{powertags}}} {{Effect=@{powereffects}}}" > </button>
        <input type="text" class=resizedTextbox name="attr_powername" value="">
        <div class="sheet-body">
        <label>Type<input type="text" name="attr_powertype" value=""></label>
        <label>Action<input type="text" name="attr_poweraction" value=""></label>
        <label>Range<input type="text" name="attr_powerrange" value=""></label>
        <label>Tags<input type="text" name="attr_powertags" value=""></label>
        <textarea name="attr_powereffects"></textarea>
        </div>
    </fieldset>
  </section>
  
  <section class="npc-trts">
    <h3>Traits</h3>
    <fieldset class="repeating_trait">
    <input type="checkbox" class="sheet-toggle-show" >
    <button type="roll" name="roll_trait" value="&{template:rolls} {{title=@{traitname}}} {{subtitle=@{character_name}}} {{Effect=@{traiteffect}}}" ></button>
    <input name="attr_traitname", type="text" class=resizedTextbox> 
    <div class="sheet-body">
    <textarea name="attr_traiteffect"></textarea> </div>
    </fieldset>
  </section>
  
  <section class="npc-inv">
    <h3>Support Items</h3>
    <fieldset class="repeating_support">
        <input type="checkbox" class="sheet-toggle-show" >
        <button type="roll" name="roll_support" value="&{template:rolls} {{title=@{supportname}}} {{subtitle=@{character_name}}} {{Type=@{supporttype}}} {{Tags=@{supporttags}}} {{Effect=@{supporteffects}}}"> </button>
        <input type="text" name="attr_supportname" value="">
        <div class="sheet-body">
        <label>Type<input type="text" name="attr_supporttype" value=""></label>
        <label>Tags<input type="text" name="attr_supporttags" value=""></label>
        <label>Effect</label>
        <textarea name="attr_supporteffects"></textarea>
        </div>
  </section>

  
</main>

<!-- General Rules Tab -->

<main class="sheet-gen">
    
<section class="header f-center">
    <h1>BEACON RPG</h1>
</section>


<section class="rerolltable">
    <h3>Reroll Table</h3>
    <button type="action" name="act_reset">Reset Round</button>
    <p>When you make an attack roll, ability check, or saving throw, you can use the reroll table to try again. Each option can only be chosen 1/round.
    You can use the reroll table after finding out if the roll would succeed, but before it actually occurs. All ACC or DIF are also rerolled.</p>
    <p><button type="roll" name="roll_rerollstress" value="&{template:rolls} {{title=Reroll Table}} {{subtitle=@{character_name}}} {{=[[1d3]] Stress}}"></button><input type="checkbox" name="attr_reroll1"> A: Take 1d3 Stress</p>
    <p><button type="roll" name="roll_rerollmark" value="&{template:rolls} {{title=Reroll Table}} {{subtitle=@{character_name}}} {{=Become MARKED. This doesn't count as a condition you've given yourself.}}"></button><input type="checkbox" name="attr_reroll2"> B: Become MARKED. You can't use this option if you are MARKED. This doesn't count as a condition you've given yourself.</p>
    <p><button type="roll" name="roll_rerollopp" value="&{template:rolls} {{title=Reroll Table}} {{subtitle=@{character_name}}} {{=If you are adjacent to an enemy or within Reach of an enemy's weapon, they can choose to A) Opportunity Attack you or B) deal [[3]] Physical to you as a reaction.}}"></button><input type="checkbox" name="attr_reroll3"> C: If you are adjacent to an enemy or within one of their weapon's REACH, they can choose to a) Opportunity Attack you or b) deal 3 Physical to you as a Reaction.</p>
</section>

<section class="surge">
    <h3><button type="roll" name="roll_surge" value="&{template:rolls} {{title=Surge}} {{subtitle=@{character_name}}} {{=?{Surge Level|1,[[2]] Stress|2,[[1d3+1]] Stress|3,[[1d6+2]] Stress|4+,[[1d6+4]] Stress}}}"></button>Surge</h3>
    <p>You can surge 1/round to take a 2nd turn. A surge counts as a turn for all effects that start or end at the character's next turn.
    You gain your standard movement, standard action, and minor action as normal.</p>
    <center>
    <table>
        <tr>
            <th>Surge #</th>
            <th>Stress Cost</th>
        </tr>
        <tr>
            <td>1   <input type="checkbox"></td>
            <td>2</td>
        </tr>
        <tr>
            <td>2   <input type="checkbox"></td>
            <td>1d3+1</td>
        </tr>
        <tr>
            <td>3   <input type="checkbox"></td>
            <td>1d6+2</td>
        </tr>
        <tr>
            <td>4+  <input type="checkbox"></td>
            <td>1d6+4</td>
        </tr>
    </table>
    </center>
</section>

<section class="reactions">
    <h3>Reactions</h3>
    <div>Focus<input type="number" name="attr_focus" value=" "></div>
    <label><button type="roll" name="roll_counter" value="&{template:rolls} {{title=Counterattack}} {{subtitle=@{character_name}}} {{Action=Reaction, 1/round}} {{Tags=Focus 1}} {{Trigger=You are hit by an attack from a character within reach of one of your weapons or spells.}} {{Effect=You can VOLLEY/CAST/FIGHT with one of those weapons or spells against that character.}}"></button><input type="checkbox" name="attr_counter1"> Counterattack
    </label>
    <p><b>Focus 1, 1/Round</b></p>
    <p>Trigger: You are hit by an attack from a character within one of your weapon or spell’s Reach.</p>
    <label><button type="roll" name="roll_interpose" value="&{template:rolls} {{title=Interpose}} {{subtitle=@{character_name}}} {{Action=Reaction}} {{Tags = Focus 1}} {{Trigger=An ally within Range 3 is targeted by an attack.}} {{Effect=You can move up to 2 spaces, ignoring reactions. If you end this movement next to the targeted ally, you can choose to become the target instead. An attack roll can only be interposed once.}}"></button> Interpose
    </label>
    <p><b>Focus 1</b></p>
    <p>Trigger: An ally within Range 3 is targeted by an attack.</p>
    <label><button type="roll" name="roll_oppatk" value="&{template:rolls} {{title=Opportunity Attack}} {{subtitle=@{character_name}}} {{Action=Reaction, 1/round}} {{Trigger=A hostile character begins a movement or standard movement within reach of one of your weapons or techniques.}} {{Effect=You can VOLLEY/CAST/FIGHT against them with one of those weapons or techniques.}}"></button><input type="checkbox" name="attr_opp1"> Opportunity Attack
    </label>
    <p><b>1/Round</b></p>
    <p>Trigger: A hostile character begins a movement or standard movement within one of your weapon or technique's Reach.</p>
</section>

<section class="gen_misc">
    <h3>Other Actions</h3>
    <label><button type="roll" name="roll_defend" value="&{template:rolls} {{title=Defend}} {{subtitle=@{character_name}}} {{Action=(1) BOLSTER}} {{=Gain [[1d3+@{armor}]] Focus. Until the start of your next turn, attacks against you gain +1 DIF.}}"></button>(1) Defend</label>
    <label><button type="roll" name="roll_recover" value="&{template:rolls} {{title=Recover}} {{subtitle=@{character_name}}} {{Action=(1) BOLSTER}} {{=Choose one: 
    • Spend a Recovery to regain all your HP
    • Clear all your Stress
    • Regain all your Mana
    
    Then choose one: 
    • Reload all reloading weapons/abilities
    • Clear all Discord on yourself
    • Clear a condition or effect on you that wasn't caused by yourself
    • Clear a condition or effect on an adjacent ally that awsn't caused by them}}"></button>(1) Recover</label>
    <label><button type="roll" name="roll_mark" value="&{template:rolls} {{title=Mark}} {{subtitle=@{character_name}}} {{Action=(3) SKIRMISH}} {{Scope=@{scope}}} {{=A character within your Scope and Line of Sight gains the MARKED condition.}}"></button>(3) Mark</label>
    <label><button type="roll" name="roll_minorcast" value="&{template:rolls} {{title=Minor Cast}} {{subtitle=@{character_name}}} {{Action=(3) CAST}} {{Tags=Mana 1}} {{Scope=@{scope}}} {{Effect=You deal 2 Stress to a target within Scope.}}"></button>(3) Minor Cast</label>
    <label><button type="roll" name="roll_hide" value="&{template:rolls} {{title=Hide}} {{subtitle=@{character_name}}} {{Action=(4) REPOSITION}} {{=You gain the HIDDEN condition. To hide, you can't be ENGAGED and either must be A) outside of enemy Line of Sight, B) benefiting from cover against enemies that have Line of Sight to you, or C) INVISIBLE.}}"></button>(4) Hide</label>
    <p>Can't Hide while ENGAGED and must be A) outside of enemy LoS, B) in cover from enemies with LoS to you, or C) INVISIBLE.</p>
    <label><button type="roll" name="roll_rush" value="&{template:rolls} {{title=Rush}} {{subtitle=@{character_name}}} {{Action=(4) REPOSITION}} {{=You can either A) Move up to your speed or B) not provoke reactions from movement this turn.}}"></button>(4) Rush</label>
    <p>Either A) Move up to your speed or B) don't provoke reactions from movement this turn.</p>
    <label><button type="roll" name="roll_improvised" value="&{template:rolls} {{title=Improvised Attack}} {{subtitle=@{character_name}}} {{Action=(5) FIGHT}} {{Range=Adjacent}} {{To Hit= [[1d20+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[1d3]] Physical}}"></button>(5) Improvised Attack</label>
    <label><button type="roll" name="roll_grapple" value="&{template:rolls} {{title=Grapple}} {{subtitle=@{character_name}}} {{Action=(5) FIGHT}} {{Range=Adjacent}} {{To Hit= [[1d20+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Effect=On a hit, both characters are GRAPPLED.}}"></button>(5) Grapple</label>
    <label><button type="roll" name="roll_grapple_ref" value="&{template:rolls} {{title=GRAPPLED Reference}} {{=While grappled, both characters count as ENGAGED and can't take Reactions. The larger character can move normally. The smaller character is IMMOBILIZED, but is drug along by the larger character. If you are the same size as the target, you count as the larger one during the turn you grapple them. Characters that are the same size can make a contested BLK check during their turn to see if they count as the larger one that turn.
    
    GRAPPLED ends if the characters are no longer adjacent to each other, the initiator ends it as a free action, or the grapple target succeeds on an opposed BLK check as a Minor Action.}}"></button>GRAPPLED Ref</label>
    <label><button type="roll" name="roll_shove" value="&{template:rolls} {{title=Shove}} {{subtitle=@{character_name}}} {{Action=(5) FIGHT}} {{Range=Adjacent}} {{To Hit= [[1d20+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Effect=On a hit, you can either Push them 1 space, or knock them PRONE}}"></button>(5) Shove</label>
</section>

<section class="wounds">
    <h3><button type="roll" name=roll_wound value="&{template:rolls} {{title=Wound/Overstress Roll}} {{subtitle=@{character_name}}} {{=[[1d6]]}}"></button>Wounds and Overstress</h3>
    <br>
    <table>
        <tr>
            <th>  1 Wound   </th>
            <th>  2 Wounds  </th>
            <th>  3 Wounds  </th>
            <th>Outcome</th>
        </tr>
        <tr>
            <td>4-6</td>
            <td>5-6</td>
            <td>6</td>
            <td>DAZED: You are DAZED until the end of your next turn.</td>
        </tr>
        <tr>
            <td>1-3</td>
            <td>2-4</td>
            <td>3-5</td>
            <td>BROKEN: Roll 1d6. 1-3, destroy a weapon. 4-6, destroy a support item.</td>
        </tr>
        <tr>
            <td>-</td>
            <td>1</td>
            <td>1-2</td>
            <td>STUNNED: You are STUNNED until the end of your next turn.</td>
        </tr>
    </table>
    <br>
    <table>
        <tr>
            <th> 1 Overstress </th>
            <th> 2 Overstress </th>
            <th> 3 Overstress </th>
            <th>Outcome</th>
        </tr>
        <tr>
            <td>4-6</td>
            <td>5-6</td>
            <td>6</td>
            <td>DAZED: You are DAZED until the end of your next turn.</td>
        </tr>
        <tr>
            <td>1-3</td>
            <td>2-4</td>
            <td>3-5</td>
            <td>UNFOCUSED: Roll 1d6. 1-3, destroy a technique. 4-6, reduce current and max mana by 1.</td>
        </tr>
        <tr>
            <td>-</td>
            <td>1</td>
            <td>1-2</td>
            <td>EXPOSED: You are VULNERABLE and WEAKENED until the end of your next turn.</td>
        </tr>
    </table>

</section>

<section class=phase>
    <h3>Phase Reference</h3>
    <table>
        <tr>
            <th>PHASE</th>
            <th>Standard Action</th>
        </tr>
        <tr>
            <td>(1) BOLSTER</td>
            <td>Defend / Recover</td>
        </tr>
        <tr>
            <td>(2) CHANNEL</td>
            <td>Channel</td>
        </tr>
        <tr>
            <td>(3) SKIRMISH</td>
            <td>Volley / Cast / Mark / Search </td>
        </tr>
        <tr>
            <td>(4) REPOSITION</td>
            <td>Rush / Hide</td>
        </tr>
        <tr>
            <td>(5) BRAWL</td>
            <td>Fight / Shove / Grapple</td>
        </tr>
        <tr>
            <td>(6) RELEASE</td>
            <td>Release</td>
        </tr>
        <tr>
            <td>(7) FULL ATTACK</td>
            <td>Full Attack</td>
        </tr>
        <tr>
            <td>(8) DELAY</td>
            <td>Any</td>
        </tr>
    </table>
</section>

</main>

<!-- NPC Gen -->

<main class="sheet-npcgen">

<section class="header f-center">
    <h1>BEACON RPG</h1>
</section>


<section class="npc_gen">
    <h3>Other Actions</h3>
    <label><button type="roll" name="roll_npcdefend" value="&{template:rolls} {{title=Defend}} {{subtitle=@{character_name}}} {{Action=BOLSTER}} {{=Attacks against this unit have +1 DIF until the start of their next turn.}}"></button>Defend</label>
    <label><button type="roll" name="roll_npcrecover" value="&{template:rolls} {{title=Recover}} {{subtitle=@{character_name}}} {{Action=BOLSTER}} {{=Choose one: 
    • Clear all Stress
    • Regain all Mana
    
    Then choose one: 
    • Reload all reloading weapons/abilities
    • Clear a condition on you that wasn't caused by yourself}}"></button>Recover</label>
    <label><button type="roll" name="roll_mark" value="&{template:rolls} {{title=Mark}} {{subtitle=@{character_name}}} {{Action=SKIRMISH}} {{Scope=@{scope}}} {{=A character within your Scope and Line of Sight gains the MARKED condition.}}"></button>Mark</label>
    <label><button type="roll" name="roll_minorcast" value="&{template:rolls} {{title=Minor Cast}} {{subtitle=@{character_name}}} {{Action=CAST}} {{Tags=Mana 1}} {{Scope=@{scope}}} {{Effect=You deal 2 Stress to a target within Scope.}}"></button>Minor Cast</label>
    <label><button type="roll" name="roll_hide" value="&{template:rolls} {{title=Hide}} {{subtitle=@{character_name}}} {{Action=REPOSITION}} {{=You gain the HIDDEN condition. To hide, you can't be ENGAGED and either must be A) outside of enemy Line of Sight, B) benefiting from cover against enemies that have Line of Sight to you, or C) INVISIBLE.}}"></button>Hide</label>
    <p>Can't Hide while ENGAGED and must be A) outside of enemy LoS, B) in cover from enemies with LoS to you, or C) INVISIBLE.</p>
    <label><button type="roll" name="roll_rush" value="&{template:rolls} {{title=Rush}} {{subtitle=@{character_name}}} {{Action=REPOSITION}} {{=You can either A) Move up to your speed or B) not provoke reactions from movement this turn.}}"></button>Rush</label>
    <p>Either A) Move up to your speed or B) don't provoke reactions from movement this turn.</p>
    <label><button type="roll" name="roll_npcimprovised" value="&{template:rolls} {{title=Improvised Attack}} {{subtitle=@{character_name}}} {{Action=FIGHT}} {{Range=Adjacent}} {{To Hit= [[1d20+@{tier} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[1d3]] Physical}}"></button>Improvised Attack</label>
    <label><button type="roll" name="roll_npcgrapple" value="&{template:rolls} {{title=Grapple}} {{subtitle=@{character_name}}} {{Action=FIGHT}} {{Range=Adjacent}} {{To Hit= [[1d20+@{tier} +?{Accuracy/Difficulty|0}d6k1]]}} {{Effect=On a hit, both characters are GRAPPLED.}}"></button>Grapple</label>
    <label><button type="roll" name="roll_grapple_ref" value="&{template:rolls} {{title=GRAPPLED Reference}} {{=While grappled, both characters count as ENGAGED and can't take Reactions. The larger character can move normally. The smaller character is IMMOBILIZED, but is drug along by the larger character. If you are the same size as the target, you count as the larger one during the turn you grapple them. Characters that are the same size can make a contested BLK check during their turn to see if they count as the larger one that turn.
    
    GRAPPLED ends if the characters are no longer adjacent to each other, the initiator ends it as a free action, or the grapple target succeeds on an opposed BLK check as a Minor Action.}}"></button>GRAPPLED Ref</label>
    <label><button type="roll" name="roll_npcshove" value="&{template:rolls} {{title=Shove}} {{subtitle=@{character_name}}} {{Action=FIGHT}} {{Range=Adjacent}} {{To Hit= [[1d20+@{tier} +?{Accuracy/Difficulty|0}d6k1]]}} {{Effect=On a hit, you can either Push them 1 space, or knock them PRONE}}"></button>Shove</label>
</section>

<section class="wounds">
    <h3><button type="roll" name=roll_wound value="&{template:rolls} {{title=Wound/Overstress Roll}} {{subtitle=@{character_name}}} {{=[[1d6]]}}"></button>Wounds and Overstress</h3>
    <br>
    <table>
        <tr>
            <th>  1 Wound   </th>
            <th>  2 Wounds  </th>
            <th>  3 Wounds  </th>
            <th>Outcome</th>
        </tr>
        <tr>
            <td>4-6</td>
            <td>5-6</td>
            <td>6</td>
            <td>DAZED: You are DAZED until the end of your next turn.</td>
        </tr>
        <tr>
            <td>1-3</td>
            <td>2-4</td>
            <td>3-5</td>
            <td>BROKEN: Roll 1d6. 1-3, destroy a weapon. 4-6, destroy a support item.</td>
        </tr>
        <tr>
            <td>-</td>
            <td>1</td>
            <td>1-2</td>
            <td>STUNNED: You are STUNNED until the end of your next turn.</td>
        </tr>
    </table>
    <br>
    <table>
        <tr>
            <th> 1 Overstress </th>
            <th> 2 Overstress </th>
            <th> 3 Overstress </th>
            <th>Outcome</th>
        </tr>
        <tr>
            <td>4-6</td>
            <td>5-6</td>
            <td>6</td>
            <td>DAZED: You are DAZED until the end of your next turn.</td>
        </tr>
        <tr>
            <td>1-3</td>
            <td>2-4</td>
            <td>3-5</td>
            <td>UNFOCUSED: Roll 1d6. 1-3, destroy a technique. 4-6, reduce current and max mana by 1.</td>
        </tr>
        <tr>
            <td>-</td>
            <td>1</td>
            <td>1-2</td>
            <td>EXPOSED: You are VULNERABLE and WEAKENED until the end of your next turn.</td>
        </tr>
    </table>

</section>

</main>


<!-- roll template -->

<rolltemplate class="sheet-rolltemplate-rolls">
  <div class="sheet-container">
    <div class="sheet-header">
      {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
      {{#name}}<div class="sheet-name">{{name}}</div>{{/name}}
      {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
    </div>
    <div class="sheet-content">
      {{#allprops() title name subtitle desc}}
      <div class="sheet-key">{{key}}</div>
      <div class="sheet-value">{{value}}</div>
      {{/allprops() title name subtitle desc}}
      {{#desc}}<div class="sheet-desc">{{desc}}</div>{{/desc}}
    </div>
  </div>
</rolltemplate>


<!-- Script -->

<script type="text/worker">

const buttonlist = ["character","npc","gen","npcgen"];
buttonlist.forEach(button => {
    on(`clicked:${button}`, function() {
        setAttrs({
            sheetTab: button
        });
    });
});

</script>

<script type="text/worker">

on('clicked:reset', () => {
    setAttrs({
        reroll1: 0,
        reroll2: 0,
        reroll3: 0,
        counter1: 0,
        opp1: 0
    });
});

</script>

<!-- hidden lists -->

<datalist id="jobs">
    <option value="Aegis">Aegis</option>
    <option value="Alchemist">Alchemist</option>
    <option value="Arsenal">Arsenal</option>
    <option value="Assassin">Assassin</option>
    <option value="Berserker">Berserker</option>
    <option value="Chronomancer">Chronomancer</option>
    <option value="Demon Hunter">Demon Hunter</option>
    <option value="Demonologist">Demonologist</option>
    <option value="Dragon Rider">Dragon Rider</option>
    <option value="Druid">Druid</option>
    <option value="Equinox">Equinox</option>
    <option value="Gravewalker">Gravewalker</option>
    <option value="Gunslinger">Gunslinger</option>
    <option value="Hexblade">Hexblade</option>
    <option value="Knightmare">Knightmare</option>
    <option value="Lifeweaver">Lifeweaver</option>
    <option value="Paladin">Paladin</option>
    <option value="Phoenix">Phoenix</option>
    <option value="Riftblade">Riftblade</option>
    <option value="Rimeguard">Rimeguard</option>
    <option value="Seeker">Seeker</option>
    <option value="Shadebinder">Shadebinder</option>
    <option value="Shadow Dancer">Shadow Dancer</option>
    <option value="Shapeshifter">Shapeshfiter</option>
    <option value="Skald">Skald</option>
    <option value="Thunderclaw">Thunderclaw</option>
    <option value="Tidecaller">Tidecaller</option>
    <option value="Warden">Warden</option>
    <option value="Warlord">Warlord</option>
</datalist>

<datalist id="ancestries">
    <option value="Avian">Avian</option>
    <option value="Cambion">Cambion</option>
    <option value="Dragonborn">Dragonborn</option>
    <option value="Dwarf">Dwarf</option>
    <option value="Elemental">Elemental</option>
    <option value="Elf">Elf</option>
    <option value="Gigan">Gigan</option>
    <option value="Gnome">Gnome</option>
    <option value="Goblin">Goblin</option>
    <option value="Halfling">Halfling</option>
    <option value="Human">Human</option>
    <option value="Kobold">Kobold</option>
    <option value="Lycanthrope">Lycanthrope</option>
    <option value="Machina">Machina</option>
    <option value="Orc">Orc</option>
</datalist>
